---
alwaysApply: false
blob: "output/**/*.md"
description: シーケンス図作成時に利用するルール。Mermaid記法を使用し、コード分析結果に基づいて正確で読みやすいシーケンス図を作成するためのガイドライン。
---
1. シーケンス図作成のインプット情報は、`output`ディレクトリ内のファイル（*.mdなど）を参照すること。
2. シーケンス図はMermaid記法で作成し、sequenceDiagram構文を使用すること。
3. 作成したシーケンス図ファイルは、`{指定のフォルダ}/sequence_diagrams/`ディレクトリに出力すること。
4. ファイル名は`sequence_XXXX.md`形式とし、XXXXには適切な識別子を設定すること（例: `sequence_{識別子1}.md`、`sequence_{識別子2}.md`）。
5. シーケンス図を作成する前に、ユーザーに以下を確認すること：作成するシーケンス図の種類（ファイル間のつながり、クラス間のつながり、一つのファイル内の処理フローなど）、対象範囲、抽象度レベル。
6. 想像で作成せず、わからないことは必ずユーザーに問いかけること。
7. 1つのシーケンス図で表現するのは、1つのユースケースや1つの主要な機能だけに絞り、スコープを限定すること。
8. 抽象度を統一すること。「コードレベル（関数名）」で書くのか、「ビジネスプロセスレベル（注文する、承認する）」で書くのかを混ぜないようにすること。
9. 処理の起点は一番左に配置し、左から右へ処理が流れるように配置すること。
10. 戻り値（Return Message）は、重要なデータが返ってくる場合や処理の完了を明示したい場合に絞って、破線の矢印（`-->`）で記述すること。すべての矢印に戻り値を書かないこと。
11. 条件分岐やループを記述する際は、UML標準の枠組み（Fragment）を使用すること：`alt`（条件分岐）、`opt`（任意）、`loop`（繰り返し）、`ref`（別のシーケンス図を参照）。
12. シーケンス図は上から下に向かって時間が流れることを意識し、同期（黒塗り矢印`->`）と非同期（開き矢印`->>`）を適切に使い分けること。
13. 実行仕様（Activation Bar）を適切に使用し、どのオブジェクトが処理中であるかを明確にすること。
14. ロジックの書きすぎを避け、「なぜその分岐が必要か」という意図が伝わる程度に留めること。
15. オブジェクトの並び順を見直し、線が交差しないように調整すること。
